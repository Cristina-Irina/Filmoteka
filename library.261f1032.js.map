{"mappings":"qhBAAAA,EAAA,SCEA,MA2BaC,EAAa,IAAIC,EA7B9BF,EAAA,UA6B0B,CAAe,cA3BzB,CACdG,WAAY,EACZC,aAAc,GACdC,aAAc,EACdC,KAAM,EACNC,aAAa,EACbC,mBAAoB,kBACpBC,kBAAmB,iBACnBC,SAAU,CACRJ,KAAM,gDACNK,YACE,+EACFC,WACE,mGAGFC,mBACE,gHAGFC,WACE,uGCvBAC,EAAeC,SAASC,cAAc,YACtCC,EAAgBF,SAASC,cAAc,oBAEtC,SAASE,IACdJ,EAAaK,UAAY,iVASzB,IACEL,EAAaK,UAAY,GACzBF,EAAcG,UAAUC,IAAI,SAChB,CAAZ,MAAOC,GAAK,C,CCgBT,SAASC,EAAiBC,GAE/B,MAAMC,EAAaD,EAAKE,KAAIC,GAlCvB,SAA8BA,GACnC,MAAMC,GAAEA,EAAEC,OAAEA,EAAMC,MAAEA,EAAKC,OAAEA,EAAMC,QAAEA,EAAOC,aAAEA,GAAiBN,EACvDO,EAAYL,GAEd,4DAEEM,EAAeJ,EAAOK,MAAM,EAAG,GACjCL,EAAOM,OAAS,GAClBF,EAAaG,KAAK,UAEpB,MAAMC,EAAOP,GAAoB,KAEjC,MAAO,sGAE0DJ,iDACxBM,WAAmBJ,iGAE3BA,yFAEQK,EAAaK,KAAK,uDAClBD,0DA4BnBE,EA3B6CR,EA4B/DQ,GAAQ,EACH,QACEA,EAAO,EACT,SAEA,4BAhCOC,OAAOT,GAAcU,QAAQ,2GA0B/C,IAAwBF,C,CAdeG,CAAqBjB,KAC1CZ,SAASC,cAAc,YAC/BG,UAAYM,EAAWe,KAAK,G,CC7BtC,MAAMK,EAAsD,eAAzCC,aAAaC,QAAQ,gBACpC,aACA,cAEJhC,SAASiC,KAAK5B,UAAUC,IAAIwB,GAE5B,MAGMI,EAAalC,SAASC,cAAc,oBACpCkC,EAAkBnC,SAASC,cAAc,oBAS/C,GAPA8B,aAAaC,QANQ,kBAMiBD,aAAaK,QAN9B,gBAOrBC,KAAKC,UAAU,KACfP,aAAaC,QAPM,cAOiBD,aAAaK,QAP9B,YAQnBC,KAAKC,UAAU,KAEfJ,GAAcK,EAXO,iBAajBL,GAAcM,OAAOC,KAAKJ,KAAKK,MAAMX,aAAaC,QAbjC,mBAauDV,OAAS,EAAG,CACtF,MAAMqB,EAAaC,EAdA,iBAenBC,QAAQC,IAAI,cAAeH,GAE3B,MAAMI,EAAc9D,EAAW+D,iBACvBC,EAAehE,EAAWiE,SAAS9D,aACnC+D,GAASJ,EAAc,GAAKE,EAC5BG,EAAMD,EAAQF,EAEtBzC,EADuBmC,EAAWtB,MAAM8B,EAAOC,IAGjDnE,EAAWiE,SAAS/D,WAAawD,EAAWrB,OAC5CrC,EAAWoE,MAAMV,EAAWrB,QAC5BrC,EAAWqE,MAETrE,EAAWsE,GAAG,aAAcC,IAC1B,MAAMC,EAAcD,EAAMlE,KACpBoE,EAAezE,EAAWiE,SAAS9D,aACnCuE,GAASF,EAAc,GAAKC,EAC5BE,EAAMD,EAAQD,EACdG,EAAelB,EAAWtB,MAAMsC,EAAOC,GAC7CpD,EAAiBqD,GACjBhB,QAAQC,IAAIe,EAAa,IAG7B1B,EAAgB9B,UAAUyD,OAAO,S,MAI/B3D,IAGF,SAASoC,EAAgBwB,GACvB,MAAMC,EAAO,CACXC,aA/CiB,gBAgDjBC,WA/Ce,aAkDjB1B,OAAO2B,QAAQH,GAAMI,SAAQC,IAC3B,MAAMC,EAAatE,SAASC,cAAc,IAAIoE,EAAK,MAC/CA,EAAK,KAAON,GACdO,EAAWjE,UAAUC,IAAI,UACzBgE,EAAWC,UAAW,IAEtBD,EAAWjE,UAAUyD,OAAO,UAC5BQ,EAAWC,UAAW,E,IASrB,SAAS3B,EAAsB4B,GACpC,MAAMC,EAAYpC,KAAKK,MAAMX,aAAaC,QAAQwC,IAClD,OAAOhC,OAAO2B,QAAQM,GAAW9D,KAAI0D,IAAS,CAACxD,IAAKwD,EAAK,MAAOA,EAAK,M,CANnEnC,GACFA,EAAWwC,iBAAiB,SAQ9B,SAAoBC,GAClBA,EAAMC,iBACN,MAAMC,EAASF,EAAME,OAErB,IAAIC,EAAO,KACPnC,EAAa,KAEbkC,EAAOE,QAAQ,mBACjBD,EAhFiB,gBAiFjBvC,EAjFiB,kBAmFfsC,EAAOE,QAAQ,iBACjBD,EAnFe,YAoFfvC,EApFe,cAuFjB,GAAIuC,EACF,OAAQA,GACN,IA1Fe,gBA2FbnC,EAAaC,EA3FA,iBA4Fb,MACF,IA5Fa,YA6FXD,EAAaC,EA7FF,aAoGjB,GAFAC,QAAQC,IAAIgC,EAAMnC,GAEdA,EAAWrB,OAAS,EAAG,CACzB,MAAM0D,EAAc/F,EAAW+D,iBACzBiC,EAAehG,EAAWiE,SAAS9D,aACnC8F,GAASF,EAAc,GAAKC,EAC5BE,EAAMD,EAAQD,EAEtBzE,EADuBmC,EAAWtB,MAAM6D,EAAOC,IAG/ChD,EAAgB9B,UAAUyD,OAAO,UAEjC7E,EAAWiE,SAAS/D,WAAawD,EAAWrB,OAC5CrC,EAAWoE,MAAMV,EAAWrB,QAC5BrC,EAAWqE,MAEXrE,EAAWsE,GAAG,aAAcC,IAC1B,MAAM7D,EAAc6D,EAAMlE,KACpBF,EAAeH,EAAWiE,SAAS9D,aACnCgG,GAASzF,EAAc,GAAKP,EAC5BiG,EAAMD,EAAQhG,EACdkG,EAAe3C,EAAWtB,MAAM+D,EAAOC,GAC7C7E,EAAiB8E,GACjBzC,QAAQC,IAAIwC,EAAa,G,MAIzBnF,G","sources":["src/library.js","src/js/pagination-library.js","src/js/emptyLibrary.js","src/js/galleryCard.js","src/js/libraryBtn.js"],"sourcesContent":["import './js/service-api';\nimport './js/libraryBtn';\n//import './js/teamModal';\n//import './js/modal';\n//import './js/scroll';\nimport '../node_modules/basiclightbox/dist/basicLightbox.min.css';\n","import Pagination from 'tui-pagination';\n\nconst options = {\n  totalItems: 0,\n  itemsPerPage: 12,\n  visiblePages: 5,\n  page: 1,\n  centerAlign: true,\n  firstItemClassName: 'tui-first-child',\n  lastItemClassName: 'tui-last-child',\n  template: {\n    page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n    currentPage:\n      '<strong class=\"tui-page-btn current-color tui-is-selected\">{{page}}</strong>',\n    moveButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n      '</a>',\n    disabledMoveButton:\n      '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n      '</span>',\n    moreButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\">' +\n      '<span class=\"tui-ico-ellip\">...</span>' +\n      '</a>',\n  },\n};\n\nexport const pagination = new Pagination('#pagination', options);\n","const noneCardList = document.querySelector('.gallery');\nconst blockEmptyLib = document.querySelector('.library-gallery');\n\nexport function emptyLibrary() {\n  noneCardList.innerHTML = `\n  <li class=\"library-gallery\">\n    <div class=\"container library-gallery__wrap\">\n      <img class=\"library-gallery__image\" src=\"./images/library-img/film2.png\" alt=\"\" width=\"750\"/>\n      <p class=\"library-gallery__text\">The library is empty.</p>\n      <p class=\"library-gallery__text\">Add some movies.</p>\n    </div>\n  </li>\n`;\n  try {\n    noneCardList.innerHTML = '';\n    blockEmptyLib.classList.add('active');\n  } catch (err) {}\n}\n","export function renderCardWithGenres(movie) {\n  const { id, poster, title, genres, release, vote_average } = movie;\n  const posterUrl = poster\n    ? poster\n    : 'https://dummyimage.com/395x574/000/fff.jpg&text=no+poster';\n\n  const genresToShow = genres.slice(0, 2);\n  if (genres.length > 2) {\n    genresToShow.push('Others');\n  }\n  const year = release ? release : null;\n\n  return `\n    <li class=\"gallery__item\">\n      <a class=\"gallery__link\" href=\"#\" data-modal-open data-id=\"${id}\">\n        <img class=\"gallery__image\" src=\"${posterUrl}\" alt=\"${title} movie poster\" loading=\"lazy\">\n        <div class=\"info\">\n          <h3 class=\"info__item\">${title}</h3>\n          <div class=\"info-detail\">\n            <p class=\"info-detail__item\">${genresToShow.join(', ')}</p>\n            <p class=\"info-detail__item\">${year}\n              <span class=\"film-rating film-rating--${getClassByRate(vote_average)}\">\n                ${Number(vote_average).toFixed(1)}\n              </span>\n            </p>\n          </div>\n        </div>\n      </a>\n    </li>\n  `;\n}\n\nexport function renderListMovies(list) {\n\n  const movieCards = list.map(movie => renderCardWithGenres(movie));\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = movieCards.join('');\n}\n\nexport function setFilmsToLocalStorage(list) {\n  const localListMovies = {};\n  list.forEach(item => {\n    const { id, ...props } = item;\n    localListMovies[id] = props;\n  });\n  localStorage.setItem('listMovies', JSON.stringify(localListMovies));\n}\n\nfunction getClassByRate(vote) {\n  if (vote >= 8) {\n    return 'green';\n  } else if (vote > 6) {\n    return 'orange';\n  } else {\n    return 'red';\n  }\n}","import { pagination } from './pagination-library';\n\nimport {emptyLibrary} from './emptyLibrary';\n\n\nimport { renderListMovies } from './galleryCard';\n\nconst classTheme = localStorage.getItem('active-theme') === 'dark-theme'\n  ? 'dark-theme'\n  : 'light-theme';\n\ndocument.body.classList.add(classTheme);\n\nconst LIST_WATCHED = 'watchedMovies';\nconst LIST_QUEUE = 'listQueue';\nconst baseActive = LIST_WATCHED;\nconst blkCtrlLib = document.querySelector('.js-blockCtrlLib');\nconst blkLibraryEmpty = document.querySelector('.library-gallery');\n\nlocalStorage.getItem(LIST_WATCHED) || localStorage.setItem(LIST_WATCHED,\nJSON.stringify({}));\nlocalStorage.getItem(LIST_QUEUE) || localStorage.setItem(LIST_QUEUE,\nJSON.stringify({}));\n\nblkCtrlLib && setActiveButton(baseActive);\n\nif (blkCtrlLib && Object.keys(JSON.parse(localStorage.getItem(baseActive))).length > 0) {\n  const listMovies = getArrayFromObjMovies(baseActive);\n  console.log(\"listMovies:\", listMovies)\n \n  const currentPage = pagination.getCurrentPage(); \n    const itemsPerPage = pagination._options.itemsPerPage; \n    const start = (currentPage - 1) * itemsPerPage; \n    const end = start + itemsPerPage;\n    const itemsForPage = listMovies.slice(start, end);\n  renderListMovies(itemsForPage);\n\npagination._options.totalItems = listMovies.length;\npagination.reset(listMovies.length);\npagination.off();\n   \n  pagination.on('afterMove', (event) => {\n    const currentPage = event.page; \n    const itemsPerPage = pagination._options.itemsPerPage; \n    const start = (currentPage - 1) * itemsPerPage; \n    const end = start + itemsPerPage;\n    const itemsForPage = listMovies.slice(start, end);\n    renderListMovies(itemsForPage);\n    console.log(itemsForPage);\n});\n\nblkLibraryEmpty.classList.remove('active');\n\n\n} else {\n  emptyLibrary();\n}\n\nfunction setActiveButton(typeList) {\n  const opts = {\n    btn__watched: LIST_WATCHED,\n    btn__queue: LIST_QUEUE,\n  };\n\n  Object.entries(opts).forEach(item => {\n    const currentBtn = document.querySelector(`#${item[0]}`);\n    if (item[1] === typeList) {\n      currentBtn.classList.add('active');\n      currentBtn.disabled = true;\n    } else {\n      currentBtn.classList.remove('active');\n      currentBtn.disabled = false;\n    }\n  });\n}\n\nif (blkCtrlLib) {\n  blkCtrlLib.addEventListener('click', onClickBtn);\n}\n\nexport function getArrayFromObjMovies(fieldLocalStorage) {\n  const objMovies = JSON.parse(localStorage.getItem(fieldLocalStorage));\n  return Object.entries(objMovies).map(item => ({id: +item[0], ...item[1]}));\n}\n\nfunction onClickBtn(event) {\n  event.preventDefault();\n  const target = event.target;\n\n  let type = null;\n  let listMovies = null;\n\n  if (target.closest('#btn__watched')) {\n    type = LIST_WATCHED;\n    setActiveButton(LIST_WATCHED);\n  }\n  if (target.closest('#btn__queue')) {\n    type = LIST_QUEUE;\n    setActiveButton(LIST_QUEUE);\n  }\n\n  if (type) {\n    switch (type) {\n      case LIST_WATCHED:\n        listMovies = getArrayFromObjMovies(LIST_WATCHED);\n        break;\n      case LIST_QUEUE:\n        listMovies = getArrayFromObjMovies(LIST_QUEUE);\n        break;\n    }\n  }\n\n  console.log(type, listMovies);\n\n  if (listMovies.length > 0) {\n    const currentPage = pagination.getCurrentPage(); \n    const itemsPerPage = pagination._options.itemsPerPage; \n    const start = (currentPage - 1) * itemsPerPage; \n    const end = start + itemsPerPage;\n    const itemsForPage = listMovies.slice(start, end);\n  renderListMovies(itemsForPage);\n  \n  blkLibraryEmpty.classList.remove('active');\n\n  pagination._options.totalItems = listMovies.length;\n  pagination.reset(listMovies.length);\n  pagination.off();  \n\n  pagination.on('afterMove', (event) => {\n    const currentPage = event.page;\n    const itemsPerPage = pagination._options.itemsPerPage;\n    const start = (currentPage - 1) * itemsPerPage;\n    const end = start + itemsPerPage;\n    const itemsForPage = listMovies.slice(start, end);\n    renderListMovies(itemsForPage);\n    console.log(itemsForPage);\n});\n\n  } else {\n    emptyLibrary();\n  }\n\n  // renderListMovies(listMovies);\n\n};"],"names":["parcelRequire","$37dad58aaab9173a$export$22fa394f3ba39578","$parcel$interopDefault","totalItems","itemsPerPage","visiblePages","page","centerAlign","firstItemClassName","lastItemClassName","template","currentPage","moveButton","disabledMoveButton","moreButton","$3aecc0505df87c9b$var$noneCardList","document","querySelector","$3aecc0505df87c9b$var$blockEmptyLib","$3aecc0505df87c9b$export$4184aa74e282b7c","innerHTML","classList","add","err","$15721b15f338fb76$export$2748887abc8deea0","list","movieCards","map","movie","id","poster","title","genres","release","vote_average","posterUrl","genresToShow","slice","length","push","year","join","vote","Number","toFixed","$15721b15f338fb76$export$bf5e8f8f83e1d784","$b3ea5f68e8de4095$var$classTheme","localStorage","getItem","body","$b3ea5f68e8de4095$var$blkCtrlLib","$b3ea5f68e8de4095$var$blkLibraryEmpty","setItem","JSON","stringify","$b3ea5f68e8de4095$var$setActiveButton","Object","keys","parse","listMovies","$b3ea5f68e8de4095$export$ca050ad3d39112c9","console","log","currentPage1","getCurrentPage","itemsPerPage1","_options","start1","end1","reset","off","on","event","currentPage2","itemsPerPage2","start2","end2","itemsForPage2","remove","typeList","opts","btn__watched","btn__queue","entries","forEach","item","currentBtn","disabled","fieldLocalStorage","objMovies","addEventListener","event1","preventDefault","target","type","closest","currentPage3","itemsPerPage3","start3","end3","start","end","itemsForPage"],"version":3,"file":"library.261f1032.js.map"}