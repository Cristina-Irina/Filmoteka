{"mappings":"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","sources":["src/library.js","node_modules/@swc/helpers/lib/_object_spread.js","src/js/pagination-library.js","src/js/emptyLibrary.js","src/js/libraryBtn.js"],"sourcesContent":["import './js/service-api';\nimport './js/libraryBtn';\n//import './js/teamModal';\n//import './js/modal';\nimport './js/scroll';\nimport '../node_modules/basiclightbox/dist/basicLightbox.min.css';\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _objectSpread;\nvar _defineProperty = _interopRequireDefault(require(\"./_define_property\"));\nfunction _objectSpread(target) {\n    for(var i = 1; i < arguments.length; i++){\n        var source = arguments[i] != null ? arguments[i] : {};\n        var ownKeys = Object.keys(source);\n        if (typeof Object.getOwnPropertySymbols === 'function') {\n            ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {\n                return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n            }));\n        }\n        ownKeys.forEach(function(key) {\n            (0, _defineProperty).default(target, key, source[key]);\n        });\n    }\n    return target;\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","import Pagination from 'tui-pagination';\n\nconst options = {\n  totalItems: 0,\n  itemsPerPage: 12,\n  visiblePages: 5,\n  page: 1,\n  centerAlign: true,\n  firstItemClassName: 'tui-first-child',\n  lastItemClassName: 'tui-last-child',\n  template: {\n    page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n    currentPage:\n      '<strong class=\"tui-page-btn current-color tui-is-selected\">{{page}}</strong>',\n    moveButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n      '</a>',\n    disabledMoveButton:\n      '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n      '</span>',\n    moreButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\">' +\n      '<span class=\"tui-ico-ellip\">...</span>' +\n      '</a>',\n  },\n};\n\nexport const pagination = new Pagination('#pagination', options);\n","const noneCardList = document.querySelector('.gallery');\nconst blockEmptyLib = document.querySelector('.library-gallery');\n\nexport function emptyLibrary() {\n  noneCardList.innerHTML = `\n  <li class=\"library-gallery\">\n    <div class=\"container library-gallery__wrap\">\n      <img class=\"library-gallery__image\" src=\"./images/library-img/film2.png\" alt=\"\" width=\"750\"/>\n      <p class=\"library-gallery__text\">The library is empty.</p>\n      <p class=\"library-gallery__text\">Add some movies.</p>\n    </div>\n  </li>\n`;\n  try {\n    noneCardList.innerHTML = '';\n    blockEmptyLib.classList.add('active');\n  } catch (err) {}\n}\n","import { pagination } from './pagination-library';\n\nimport {emptyLibrary} from './emptyLibrary';\n\n\nimport { renderListMovies } from './galleryCard';\n\nconst classTheme = localStorage.getItem('active-theme') === 'dark-theme'\n  ? 'dark-theme'\n  : 'light-theme';\n\ndocument.body.classList.add(classTheme);\n\nconst LIST_WATCHED = 'watchedMovies';\nconst LIST_QUEUE = 'listQueue';\nconst baseActive = LIST_WATCHED;\nconst blkCtrlLib = document.querySelector('.js-blockCtrlLib');\nconst blkLibraryEmpty = document.querySelector('.library-gallery');\n\nlocalStorage.getItem(LIST_WATCHED) || localStorage.setItem(LIST_WATCHED,\nJSON.stringify({}));\nlocalStorage.getItem(LIST_QUEUE) || localStorage.setItem(LIST_QUEUE,\nJSON.stringify({}));\n\nblkCtrlLib && setActiveButton(baseActive);\n\nif (blkCtrlLib && Object.keys(JSON.parse(localStorage.getItem(baseActive))).length > 0) {\n  const listMovies = getArrayFromObjMovies(baseActive);\n  console.log(\"listMovies:\", listMovies)\n \n  const currentPage = pagination.getCurrentPage(); \n    const itemsPerPage = pagination._options.itemsPerPage; \n    const start = (currentPage - 1) * itemsPerPage; \n    const end = start + itemsPerPage;\n    const itemsForPage = listMovies.slice(start, end);\n  renderListMovies(itemsForPage);\n\npagination._options.totalItems = listMovies.length;\npagination.reset(listMovies.length);\npagination.off();\n   \n  pagination.on('afterMove', (event) => {\n    const currentPage = event.page; \n    const itemsPerPage = pagination._options.itemsPerPage; \n    const start = (currentPage - 1) * itemsPerPage; \n    const end = start + itemsPerPage;\n    const itemsForPage = listMovies.slice(start, end);\n    renderListMovies(itemsForPage);\n    console.log(itemsForPage);\n});\n\nblkLibraryEmpty.classList.remove('active');\n\n\n} else {\n  emptyLibrary();\n}\n\nfunction setActiveButton(typeList) {\n  const opts = {\n    btn__watched: LIST_WATCHED,\n    btn__queue: LIST_QUEUE,\n  };\n\n  Object.entries(opts).forEach(item => {\n    const currentBtn = document.querySelector(`#${item[0]}`);\n    if (item[1] === typeList) {\n      currentBtn.classList.add('active');\n      currentBtn.disabled = true;\n    } else {\n      currentBtn.classList.remove('active');\n      currentBtn.disabled = false;\n    }\n  });\n}\n\nif (blkCtrlLib) {\n  blkCtrlLib.addEventListener('click', onClickBtn);\n}\n\nexport function getArrayFromObjMovies(fieldLocalStorage) {\n  const objMovies = JSON.parse(localStorage.getItem(fieldLocalStorage));\n  return Object.entries(objMovies).map(item => ({id: +item[0], ...item[1]}));\n}\n\nfunction onClickBtn(event) {\n  event.preventDefault();\n  const target = event.target;\n\n  let type = null;\n  let listMovies = null;\n\n  if (target.closest('#btn__watched')) {\n    type = LIST_WATCHED;\n    setActiveButton(LIST_WATCHED);\n  }\n  if (target.closest('#btn__queue')) {\n    type = LIST_QUEUE;\n    setActiveButton(LIST_QUEUE);\n  }\n\n  if (type) {\n    switch (type) {\n      case LIST_WATCHED:\n        listMovies = getArrayFromObjMovies(LIST_WATCHED);\n        break;\n      case LIST_QUEUE:\n        listMovies = getArrayFromObjMovies(LIST_QUEUE);\n        break;\n    }\n  }\n\n  console.log(type, listMovies);\n\n  if (listMovies.length > 0) {\n    const currentPage = pagination.getCurrentPage(); \n    const itemsPerPage = pagination._options.itemsPerPage; \n    const start = (currentPage - 1) * itemsPerPage; \n    const end = start + itemsPerPage;\n    const itemsForPage = listMovies.slice(start, end);\n  renderListMovies(itemsForPage);\n  \n  blkLibraryEmpty.classList.remove('active');\n\n  pagination._options.totalItems = listMovies.length;\n  pagination.reset(listMovies.length);\n  pagination.off();  \n\n  pagination.on('afterMove', (event) => {\n    const currentPage = event.page;\n    const itemsPerPage = pagination._options.itemsPerPage;\n    const start = (currentPage - 1) * itemsPerPage;\n    const end = start + itemsPerPage;\n    const itemsForPage = listMovies.slice(start, end);\n    renderListMovies(itemsForPage);\n    console.log(itemsForPage);\n});\n\n  } else {\n    emptyLibrary();\n  }\n\n  // renderListMovies(listMovies);\n\n};"],"names":["parcelRequire","Object","defineProperty","$9eddae5a012cde57$exports","value","default","target","i","arguments","length","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","key","$9eddae5a012cde57$var$_defineProperty","obj","__esModule","$4e1fdcffa24ebef7$export$22fa394f3ba39578","$parcel$interopDefault","totalItems","itemsPerPage","visiblePages","page","centerAlign","firstItemClassName","lastItemClassName","template","currentPage","moveButton","disabledMoveButton","moreButton","$7d8e521d7ada6a5a$var$noneCardList","document","querySelector","$7d8e521d7ada6a5a$var$blockEmptyLib","$7d8e521d7ada6a5a$export$4184aa74e282b7c","innerHTML","classList","add","err","$d96e4c35cc5a0f62$var$classTheme","localStorage","getItem","body","$d96e4c35cc5a0f62$var$LIST_WATCHED","$d96e4c35cc5a0f62$var$LIST_QUEUE","$d96e4c35cc5a0f62$var$baseActive","$d96e4c35cc5a0f62$var$blkCtrlLib","$d96e4c35cc5a0f62$var$blkLibraryEmpty","setItem","JSON","stringify","$d96e4c35cc5a0f62$var$setActiveButton","parse","$d96e4c35cc5a0f62$var$listMovies","$d96e4c35cc5a0f62$export$ca050ad3d39112c9","console","log","$d96e4c35cc5a0f62$var$currentPage1","getCurrentPage","$d96e4c35cc5a0f62$var$itemsPerPage1","_options","$d96e4c35cc5a0f62$var$start1","$d96e4c35cc5a0f62$var$end1","$d96e4c35cc5a0f62$var$itemsForPage1","slice","$6SKsc","renderListMovies","reset","off","on","event","currentPage2","itemsPerPage2","start2","end2","itemsForPage2","remove","typeList","opts","btn__watched","btn__queue","entries","item","currentBtn","disabled","fieldLocalStorage","objMovies","map","id","addEventListener","event1","preventDefault","type","listMovies","closest","currentPage3","itemsPerPage3","start3","end3","itemsForPage3","start","end","itemsForPage"],"version":3,"file":"library.68ff2b75.js.map"}