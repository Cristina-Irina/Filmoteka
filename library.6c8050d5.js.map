{"mappings":"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","sources":["src/library.js","src/js/pagination-library.js","src/js/emptyLibrary.js","src/js/libraryBtn.js"],"sourcesContent":["import './js/service-api';\nimport './js/libraryBtn';\n//import './js/teamModal';\n//import './js/modal';\nimport './js/scroll';\nimport '../node_modules/basiclightbox/dist/basicLightbox.min.css';\n","import Pagination from 'tui-pagination';\n\nconst options = {\n  totalItems: 0,\n  itemsPerPage: 12,\n  visiblePages: 5,\n  page: 1,\n  centerAlign: true,\n  firstItemClassName: 'tui-first-child',\n  lastItemClassName: 'tui-last-child',\n  template: {\n    page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n    currentPage:\n      '<strong class=\"tui-page-btn current-color tui-is-selected\">{{page}}</strong>',\n    moveButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n      '</a>',\n    disabledMoveButton:\n      '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n      '</span>',\n    moreButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\">' +\n      '<span class=\"tui-ico-ellip\">...</span>' +\n      '</a>',\n  },\n};\n\nexport const pagination = new Pagination('#pagination', options);\n","const noneCardList = document.querySelector('.gallery');\nconst blockEmptyLib = document.querySelector('.library-gallery');\n\nexport function emptyLibrary() {\n  noneCardList.innerHTML = `\n  <li class=\"library-gallery\">\n    <div class=\"container library-gallery__wrap\">\n      <img class=\"library-gallery__image\" src=\"./images/library-img/film2.png\" alt=\"\" width=\"750\"/>\n      <p class=\"library-gallery__text\">The library is empty.</p>\n      <p class=\"library-gallery__text\">Add some movies.</p>\n    </div>\n  </li>\n`;\n  try {\n    noneCardList.innerHTML = '';\n    blockEmptyLib.classList.add('active');\n  } catch (err) {}\n}\n","import { pagination } from './pagination-library';\n\nimport {emptyLibrary} from './emptyLibrary';\n\n\nimport { renderListMovies } from './galleryCard';\n\nconst classTheme = localStorage.getItem('active-theme') === 'dark-theme'\n  ? 'dark-theme'\n  : 'light-theme';\n\ndocument.body.classList.add(classTheme);\n\nconst LIST_WATCHED = 'watchedMovies';\nconst LIST_QUEUE = 'listQueue';\nconst baseActive = LIST_WATCHED;\nconst blkCtrlLib = document.querySelector('.js-blockCtrlLib');\nconst blkLibraryEmpty = document.querySelector('.library-gallery');\n\nlocalStorage.getItem(LIST_WATCHED) || localStorage.setItem(LIST_WATCHED,\nJSON.stringify({}));\nlocalStorage.getItem(LIST_QUEUE) || localStorage.setItem(LIST_QUEUE,\nJSON.stringify({}));\n\nblkCtrlLib && setActiveButton(baseActive);\n\nif (blkCtrlLib && Object.keys(JSON.parse(localStorage.getItem(baseActive))).length > 0) {\n  const listMovies = getArrayFromObjMovies(baseActive);\n  console.log(\"listMovies:\", listMovies)\n \n  const currentPage = pagination.getCurrentPage(); \n    const itemsPerPage = pagination._options.itemsPerPage; \n    const start = (currentPage - 1) * itemsPerPage; \n    const end = start + itemsPerPage;\n    const itemsForPage = listMovies.slice(start, end);\n  renderListMovies(itemsForPage);\n\npagination._options.totalItems = listMovies.length;\npagination.reset(listMovies.length);\npagination.off();\n   \n  pagination.on('afterMove', (event) => {\n    const currentPage = event.page; \n    const itemsPerPage = pagination._options.itemsPerPage; \n    const start = (currentPage - 1) * itemsPerPage; \n    const end = start + itemsPerPage;\n    const itemsForPage = listMovies.slice(start, end);\n    renderListMovies(itemsForPage);\n    console.log(itemsForPage);\n});\n\nblkLibraryEmpty.classList.remove('active');\n\n\n} else {\n  emptyLibrary();\n}\n\nfunction setActiveButton(typeList) {\n  const opts = {\n    btn__watched: LIST_WATCHED,\n    btn__queue: LIST_QUEUE,\n  };\n\n  Object.entries(opts).forEach(item => {\n    const currentBtn = document.querySelector(`#${item[0]}`);\n    if (item[1] === typeList) {\n      currentBtn.classList.add('active');\n      currentBtn.disabled = true;\n    } else {\n      currentBtn.classList.remove('active');\n      currentBtn.disabled = false;\n    }\n  });\n}\n\nif (blkCtrlLib) {\n  blkCtrlLib.addEventListener('click', onClickBtn);\n}\n\nexport function getArrayFromObjMovies(fieldLocalStorage) {\n  const objMovies = JSON.parse(localStorage.getItem(fieldLocalStorage));\n  return Object.entries(objMovies).map(item => ({id: +item[0], ...item[1]}));\n}\n\nfunction onClickBtn(event) {\n  event.preventDefault();\n  const target = event.target;\n\n  let type = null;\n  let listMovies = null;\n\n  if (target.closest('#btn__watched')) {\n    type = LIST_WATCHED;\n    setActiveButton(LIST_WATCHED);\n  }\n  if (target.closest('#btn__queue')) {\n    type = LIST_QUEUE;\n    setActiveButton(LIST_QUEUE);\n  }\n\n  if (type) {\n    switch (type) {\n      case LIST_WATCHED:\n        listMovies = getArrayFromObjMovies(LIST_WATCHED);\n        break;\n      case LIST_QUEUE:\n        listMovies = getArrayFromObjMovies(LIST_QUEUE);\n        break;\n    }\n  }\n\n  console.log(type, listMovies);\n\n  if (listMovies.length > 0) {\n    const currentPage = pagination.getCurrentPage(); \n    const itemsPerPage = pagination._options.itemsPerPage; \n    const start = (currentPage - 1) * itemsPerPage; \n    const end = start + itemsPerPage;\n    const itemsForPage = listMovies.slice(start, end);\n  renderListMovies(itemsForPage);\n  \n  blkLibraryEmpty.classList.remove('active');\n\n  pagination._options.totalItems = listMovies.length;\n  pagination.reset(listMovies.length);\n  pagination.off();  \n\n  pagination.on('afterMove', (event) => {\n    const currentPage = event.page;\n    const itemsPerPage = pagination._options.itemsPerPage;\n    const start = (currentPage - 1) * itemsPerPage;\n    const end = start + itemsPerPage;\n    const itemsForPage = listMovies.slice(start, end);\n    renderListMovies(itemsForPage);\n    console.log(itemsForPage);\n});\n\n  } else {\n    emptyLibrary();\n  }\n\n  // renderListMovies(listMovies);\n\n};"],"names":["parcelRequire","$37dad58aaab9173a$export$22fa394f3ba39578","$parcel$interopDefault","totalItems","itemsPerPage","visiblePages","page","centerAlign","firstItemClassName","lastItemClassName","template","currentPage","moveButton","disabledMoveButton","moreButton","$3aecc0505df87c9b$var$noneCardList","document","querySelector","$3aecc0505df87c9b$var$blockEmptyLib","$3aecc0505df87c9b$export$4184aa74e282b7c","innerHTML","classList","add","err","$b3ea5f68e8de4095$var$classTheme","localStorage","getItem","body","$b3ea5f68e8de4095$var$blkCtrlLib","$b3ea5f68e8de4095$var$blkLibraryEmpty","setItem","JSON","stringify","$b3ea5f68e8de4095$var$setActiveButton","Object","keys","parse","length","listMovies","$b3ea5f68e8de4095$export$ca050ad3d39112c9","console","log","currentPage1","getCurrentPage","itemsPerPage1","_options","start1","end1","itemsForPage1","slice","$1Q9Cb","renderListMovies","reset","off","on","event","currentPage2","itemsPerPage2","start2","end2","itemsForPage2","remove","typeList","opts","btn__watched","btn__queue","entries","forEach","item","currentBtn","disabled","fieldLocalStorage","objMovies","map","id","addEventListener","event1","preventDefault","target","type","closest","currentPage3","itemsPerPage3","start3","end3","itemsForPage3","start","end","itemsForPage"],"version":3,"file":"library.6c8050d5.js.map"}